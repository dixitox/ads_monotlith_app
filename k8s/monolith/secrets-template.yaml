# Secrets Template for RetailMonolith
# IMPORTANT: This file is now primarily for reference.
# With Azure AD authentication, no SQL passwords are needed!
#
# The connection string will be constructed from ConfigMap values.
# Authentication uses AKS Managed Identity.
#
# If you need to store other secrets (like API keys), you can add them here.

apiVersion: v1
kind: Secret
metadata:
  name: retail-monolith-secrets
  namespace: retail-monolith
type: Opaque
data:
  # Connection string for Azure AD authentication (base64 encoded)
  # Format: Server=tcp:YOUR_SERVER.database.windows.net,1433;Database=RetailMonolithDB;Authentication=Active Directory Default;Encrypt=True;
  # 
  # Example for encoding:
  # PowerShell: [Convert]::ToBase64String([System.Text.Encoding]::UTF8.GetBytes("Server=tcp:sql-retail-monolith.database.windows.net,1433;Database=RetailMonolithDB;Authentication=Active Directory Default;Encrypt=True;"))
  #
  ConnectionStrings__DefaultConnection: "BASE64_ENCODED_CONNECTION_STRING_WITH_AZURE_AD_AUTH"

---
# Alternative: Using Azure Key Vault (Recommended for Production)
# Uncomment below and configure Azure Key Vault Provider for Secrets Store CSI Driver
# 
# apiVersion: secrets-store.csi.x-k8s.io/v1
# kind: SecretProviderClass
# metadata:
#   name: azure-keyvault-sql
#   namespace: retail-monolith
# spec:
#   provider: azure
#   parameters:
#     usePodIdentity: "false"
#     useVMManagedIdentity: "true"
#     userAssignedIdentityID: "<MANAGED_IDENTITY_CLIENT_ID>"
#     keyvaultName: "<YOUR_KEYVAULT_NAME>"
#     objects: |
#       array:
#         - |
#           objectName: sql-connection-string
#           objectType: secret
#           objectVersion: ""
#     tenantId: "<YOUR_TENANT_ID>"
